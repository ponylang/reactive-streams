



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://ponylang.github.io/reactive_streams/src/reactive_streams/subscribermanager/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/logo.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-ponylang-0.2.8">
    
    
      
        <title>Subscribermanager - reactive_streams</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.b80b25f7.css">
      
    
    
      <script src="../../../assets/javascripts/modernizr.0b5df86e.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
          <a href="https://ponylang.github.io/reactive_streams/" title="reactive_streams" class="md-header-nav__button md-logo">
          
            <img src="../../../assets/images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                reactive_streams
              </span>
              <span class="md-header-nav__topic">
                Subscribermanager
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../../assets/images/logo.png" width="48" height="48">
      
    </span>
    reactive_streams
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="reactive_streams" class="md-nav__link">
      reactive_streams
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      package reactive_streams
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        package reactive_streams
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams--index/" title="Package" class="md-nav__link">
      Package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams-Unicast/" title="class Unicast" class="md-nav__link">
      class Unicast
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams-Subscription/" title="interface Subscription" class="md-nav__link">
      interface Subscription
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams-NoSubscription/" title="class NoSubscription" class="md-nav__link">
      class NoSubscription
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams-SubscriberManager/" title="interface SubscriberManager" class="md-nav__link">
      interface SubscriberManager
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams-Subscriber/" title="interface Subscriber" class="md-nav__link">
      interface Subscriber
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams-Publisher/" title="interface Publisher" class="md-nav__link">
      interface Publisher
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams-Processor/" title="interface Processor" class="md-nav__link">
      interface Processor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams-ManagedPublisher/" title="interface ManagedPublisher" class="md-nav__link">
      interface ManagedPublisher
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams-ReactiveError/" title="trait ReactiveError" class="md-nav__link">
      trait ReactiveError
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams-SubscribedAlready/" title="primitive SubscribedAlready" class="md-nav__link">
      primitive SubscribedAlready
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams-PublisherFull/" title="primitive PublisherFull" class="md-nav__link">
      primitive PublisherFull
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reactive_streams-Broadcast/" title="class Broadcast" class="md-nav__link">
      class Broadcast
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Subscribermanager</h1>
                
                <pre><code class="language-pony-full-source">interface SubscriberManager[A: Any #share]
  &quot;&quot;&quot;
  Manages a subscriber list.
  &quot;&quot;&quot;
  fun min_request(): U64
    &quot;&quot;&quot;
    Returns the lowest request count of all subscribers.
    &quot;&quot;&quot;

  fun max_request(): U64
    &quot;&quot;&quot;
    Returns the highest request count of all subscribers.
    &quot;&quot;&quot;

  fun queue_bound(): U64
    &quot;&quot;&quot;
    Returns the queue bound.
    &quot;&quot;&quot;

  fun queue_size(): U64
    &quot;&quot;&quot;
    Returns the current queue size.
    &quot;&quot;&quot;

  fun subscriber_count(): U64
    &quot;&quot;&quot;
    Returns the current subscriber count.
    &quot;&quot;&quot;

  fun ref publish(a: A)
    &quot;&quot;&quot;
    A ManagedPublisher should call this when it has data to publish.
    Subscribers with pending demand will be sent the data immediately. If any
    subscribers with no pending demand exist, the data will be kept on a
    queue to be sent when subscribers request additional data.

    The queue size can be bounded. If so, undelivered old data will be dropped
    if new data must be queued and the queue has hit its size limit.
    &quot;&quot;&quot;

  fun ref on_complete()
    &quot;&quot;&quot;
    A ManagedPublisher should call this when it has no more data to produce.
    &quot;&quot;&quot;

  fun ref on_error(e: ReactiveError)
    &quot;&quot;&quot;
    A ManagedPublisher should call this when its internal state has resulted in
    an error that should be propagated to all subscribers.
    &quot;&quot;&quot;

  fun ref on_subscribe(sub: Subscriber[A])
    &quot;&quot;&quot;
    A ManagedPublisher should call this when it receives Publisher.subscribe.
    &quot;&quot;&quot;

  fun ref on_request(sub: Subscriber[A], n: U64)
    &quot;&quot;&quot;
    A ManagedPublisher should call this when it receives
    ManagedPublisher._on_request.
    &quot;&quot;&quot;

  fun ref on_cancel(sub: Subscriber[A])
    &quot;&quot;&quot;
    A ManagedPublisher should call this when it receives
    ManagedPublisher._on_cancel.
    &quot;&quot;&quot;

class iso _Subscription[A: Any #share] is Subscription
  &quot;&quot;&quot;
  Implements Subscription[A], allowing a subscriber to a ManagedPublisher to
  request more data or cancel its subscription.
  &quot;&quot;&quot;
  let _sub: Subscriber[A]
  let _pub: ManagedPublisher[A]
  var _cancelled: Bool = false

  new iso create(sub: Subscriber[A], pub: ManagedPublisher[A]) =&gt;
    &quot;&quot;&quot;
    Create a _Subscription for a given subscriber and publisher.
    &quot;&quot;&quot;
    _sub = sub
    _pub = pub

  fun ref request(n: U64) =&gt;
    &quot;&quot;&quot;
    Request more data. NOP if the subscription has been cancelled.
    &quot;&quot;&quot;
    if not _cancelled and (n &gt; 0) then
      _pub.on_request(_sub, n)
    end

  fun ref cancel() =&gt;
    &quot;&quot;&quot;
    Cancel the subscription. NOP if it has already been cancelled.
    &quot;&quot;&quot;
    if not _cancelled then
      _cancelled = true
      _pub.on_cancel(_sub)
    end

</code></pre>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
    <script src="../../../assets/javascripts/application.cb37bb38.js"></script>
      
      <script>app.initialize({version:"1.1.2",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>